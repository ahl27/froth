<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="froth">
<title>Loops • froth</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Loops">
<meta property="og:description" content="froth">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">froth</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="external-link nav-link" href="https://www.ahl27.com/froth/articles/froth.html">Overview</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-tutorial">Tutorial</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-tutorial">
    <a class="external-link dropdown-item" href="https://www.ahl27.com/froth/articles/FundamentalFroth.html">1. Fundamental Froth</a>
    <a class="external-link dropdown-item" href="https://www.ahl27.com/froth/articles/ArithmeticAndStacks.html">2. Arithmetic and Stacks</a>
    <a class="external-link dropdown-item" href="https://www.ahl27.com/froth/articles/Conditionals.html">3. Conditionals</a>
    <a class="external-link dropdown-item" href="https://www.ahl27.com/froth/articles/Loops.html">4. Loops</a>
    <a class="external-link dropdown-item" href="https://www.ahl27.com/froth/articles/Variables.html">5. Variables</a>
    <a class="external-link dropdown-item" href="https://www.ahl27.com/froth/articles/RInterface.html">6. Interfacing with R</a>
    <a class="external-link dropdown-item" href="https://www.ahl27.com/froth/articles/Glossary.html">Glossary</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://www.ahl27.com/tutorials" aria-label="Homepage">
    <span class="fa fa-user"></span>
     
  </a>
</li>
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/ahl27/froth" aria-label="GitHub">
    <span class="fa fa-github"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Loops</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/ahl27/froth/blob/HEAD/vignettes/Loops.Rmd" class="external-link"><code>vignettes/Loops.Rmd</code></a></small>
      <div class="d-none name"><code>Loops.Rmd</code></div>
    </div>

    
    
<p>Computers are excellent are performing the same task over and over
and over again. In order to ensure that it’s just the computer doing
repetitive tasks (and not also the coder typing them out), most
languages employ a type of operation called a loop. Loops come in two
main flavors: definite and indefinite.</p>
<div class="section level2">
<h2 id="definite-loops">Definite loops<a class="anchor" aria-label="anchor" href="#definite-loops"></a>
</h2>
<p>Definite loops are ones in which you specify exactly how many times a
certain process should happen. Just like in Forth, you specify these
loops with <code>DO...LOOP</code>. Let’s look at an example:</p>
<pre><code>fr&gt; 5 0 DO ." Hello!" CR LOOP
Hello!
Hello!
Hello!
Hello!
Hello! 
ok.</code></pre>
<p>These types of loops have five main components:
<code>END START DO xxx LOOP</code>. <code>END</code> and
<code>START</code> specify the ending and starting values for our loop
counter. Think of it like counting: we start at <code>START</code> and
begin counting up to <code>END</code>. For every number we count, we do
the stuff between <code>DO</code> and <code>LOOP</code>.</p>
<p>In this case, we’ve defined a loop with <code>5 0 DO ... LOOP</code>.
This means that we’ll start at 0 and count up to 5. At each value (0, 1,
2, 3, 4), we do the middle stuff, which in this case is printing
<code>Hello!</code>. Note that we stop at <code>END</code> without doing
the stuff again.</p>
<p>It’s often useful to be able to do stuff with the number we’re
currently at. For instance, what if we wanted to print out what number
we’re currently counting at before saying <code>Hello!</code>? In this
case, we use the special word <code>I</code>, which copies the current
value of the loop counter to the stack.</p>
<pre><code>fr&gt; 5 0 DO I . ." Hello!" CR LOOP
0 Hello! 
1 Hello! 
2 Hello! 
3 Hello! 
4 Hello! 
ok.</code></pre>
<p>The <code>LOOP</code> command tells <code>froth</code> to add 1 to
the loop counter. This means that you can use negative numbers and/or
fractions as loop limits:</p>
<pre><code>fr&gt; 0 -2 DO ." looping!" LOOP
looping! looping! ok.
fr&gt; 3.5 0.5 DO ." fraction!" LOOP
fraction! fraction! fraction! ok.</code></pre>
<p>Like with the examples in Chapter 1, you can make words that expect
to find elements on the stack as input to a loop:</p>
<pre><code>fr&gt; : MULTIPLICATION ( n -- ) cr 11 1 do dup i * . loop drop ;
ok.
fr&gt; 7 multiplication
7 14 21 28 35 42 49 56 63 70 ok.</code></pre>
</div>
<div class="section level2">
<h2 id="more-complex-loops">More Complex Loops<a class="anchor" aria-label="anchor" href="#more-complex-loops"></a>
</h2>
<p><code>if...then</code> statements can be nested within loops to make
the computer do certain operations on certain loop iterations. For
example:</p>
<pre><code>fr&gt; 64 0 do i 8 mod 0= if cr then ." *" loop
* * * * * * * * 
* * * * * * * * 
* * * * * * * * 
* * * * * * * * 
* * * * * * * * 
* * * * * * * * 
* * * * * * * * 
* * * * * * * * ok.</code></pre>
<p>This loop proceeds from 0 to 64. If the loop counter is equivalent to
a multiple of 8 (<code>i 8 mod 0= if</code>), then it prints a newline.
Either way, it prints a star.</p>
<p>Just like with <code>if...then</code> statements, we can also nest
loops. For example:</p>
<pre><code>fr&gt; : multip ( n -- ) cr 5 1 do dup i * . loop drop ;
ok.
fr&gt; : table ( -- ) cr 5 1 do i multip loop ;
1 2 3 4 
2 4 6 8 
3 6 9 12 
4 8 12 16 ok.</code></pre>
<p>This produces a (small) multiplication table. If you change the loop
limits, you can change how big the table is.</p>
<p>The built-in words <code>I</code> copies the current loop counter to
the stack. If you wanted to had nested loops and wanted to access the
outer loop counter from an inner loop, <code>J</code> copies that value
to the stack. <code>K</code> performs a similar operation, but returns
the loop counter two levels up. For example:</p>
<pre><code>fr&gt; 2 0 DO 2 0 DO 2 0 DO I J K . . . CR LOOP LOOP LOOP
0 0 0 
0 0 1 
0 1 0 
0 1 1 
1 0 0 
1 0 1 
1 1 0 
1 1 1 
ok.</code></pre>
<p>We have three nested loops. The outermost one executes twice,
counting from 0 to 2. The middle loop executes twice <em>per outer
loop</em>, counting from 2 to 4 each time. The inner loop executes twice
per middle loop, counting from 4 to 6 each time. In all, the outer loop
runs twice, the middle loop 4 times, and the inner loop 8 times. From
the innermost loop, we use <code>I</code> to get the loop counter,
<code>j</code> to get the second loop counter, and <code>K</code> to get
the outermost loop counter.</p>
<p>We also don’t have to always increment the loop value by 1. Instead,
we can use the <code>+LOOP</code> word, which expects a value on the
stack and increments the loop counter by that amount. For example, we
can modify our previous triple loop:</p>
<pre><code>fr&gt; 10 0 DO 4 0 DO 0 2 DO I J K . . . CR -1 +LOOP 2 +LOOP 5 +LOOP
0 0 2 
0 0 1 
0 0 0 
0 2 2 
0 2 1 
0 2 0 
5 0 2 
5 0 1 
5 0 0 
5 2 2 
5 2 1 
5 2 0 
ok.</code></pre>
<p>Now the outermost loop iterates from 0 to 10 by 5
(<code>10 0 DO ... 5 +LOOP</code>), the second loop iterates from 0 to 4
by 2 (<code>4 0 DO ... 2 +LOOP</code>), and the innermost loop iterates
from 2 to 0 by -1 (<code>0 2 DO ... -1 +LOOP</code>).</p>
<p>Do you see what’s changed? There’s one key difference between the
outer two loops and the inner loop of the previous example. The outer
loops iterate as long as they’re <em>less than</em> the end value, but
the inner loop iterates as long as its <em>greater than or equal to</em>
the end value. When you use a loop with a negative <code>+LOOP</code>
value, keep in mind that the loop will iterate an additional time
compared to the positive direction. For example,
<code>5 0 DO ... 1 +LOOP</code> iterates 5 times, whereas
<code>0 5 DO ... -1 +LOOP</code> iterates 6 times.</p>
</div>
<div class="section level2">
<h2 id="indefinite-loops">Indefinite Loops<a class="anchor" aria-label="anchor" href="#indefinite-loops"></a>
</h2>
<p>Indefinite loops keep going without a specified end point. These
loops use <code>BEGIN...UNTIL</code> rather than <code>DO...LOOP</code>.
The basic syntax is the same, except that <code>UNTIL</code> will check
the stack for <code>TRUE</code>. If it finds <code>TRUE</code>, the loop
terminates, and otherwise execution jumps back to
<code>BEGIN</code>.</p>
<pre><code>fr&gt; 0 BEGIN 1 + dup dup . 10 &gt; UNTIL
1 2 3 4 5 6 7 8 9 10 11 ok.</code></pre>
<p>Here we start with 0, then at each iteration of the loop we add 1 to
it. We then duplicate it twice, print one of the copies, and then let
<code>UNTIL</code> check if the second copy is greater than 10. Once the
value becomes 11, <code>10 &gt;</code> evaluates to <code>TRUE</code>
and the loop exits.</p>
<p><code>UNTIL</code> checks the condition at the end of the loop, but
what if we wanted to check at the beginning? <code>BEGIN...UNTIL</code>
loops will always execute at least once, but sometimes it’s preferable
to have a loop that doesn’t always execute.</p>
<p>For this, we have <code>BEGIN...WHILE...REPEAT</code> loops.
<code>WHILE</code> examines the stack similar to <code>UNTIL</code>, and
skips immediately to <code>REPEAT</code> if the condition is
<code>TRUE</code>.</p>
<p>Let’s try the previous example again, using a <code>WHILE</code> loop
instead:</p>
<pre><code>fr&gt; 0 BEGIN dup 10 &lt; WHILE dup . 1 +  REPEAT
0 1 2 3 4 5 6 7 8 9 ok.</code></pre>
<p>There are a few differences here. First, we’ve had to reverse the
comparison sign. This is because this loop continues <em>while</em> the
condition is true, whereas <code>BEGIN...UNTIL</code> goes
<em>until</em> the loop is true.</p>
<p>In some particular cases, you need a loop that never ends. The
<code>BEGIN...AGAIN</code> loop will run forever without terminating.
I’d include an example, but it would never stop running…</p>
<p>So in the absence of that, I’ll showcase use of
<code>BEGIN...AGAIN</code> alongside another operator,
<code>LEAVE</code>. <code>LEAVE</code> exits the current loop
immediately. For example:</p>
<pre><code>fr&gt; 0 begin 1 + dup dup . 10 &gt; if leave then again
1 2 3 4 5 6 7 8 9 10 11 ok.</code></pre>
<p>Normally the <code>BEGIN...AGAIN</code> loop would go on forever.
However, in the middle we’re doing <code>10 &gt; if leave then</code>.
This compares the current value on the stack to 10, and if it’s greater
than 10, we run <code>leave</code>. As soon as the value on the stack
reaches 11, we execute <code>leave</code> and the loop finishes.</p>
</div>
<div class="section level2">
<h2 id="words-in-this-chapter">Words in this chapter<a class="anchor" aria-label="anchor" href="#words-in-this-chapter"></a>
</h2>
<ul>
<li>
<code>DO ( end start -- )</code>: starts a definite loop from
<code>start</code> to <code>end</code>
</li>
<li>
<code>LOOP ( -- )</code>: increments the loop counter by 1</li>
<li>
<code>+LOOP ( n -- )</code>: increments the loop counter by n</li>
<li>
<code>I ( -- n )</code>: copies the current loop counter to the
stack</li>
<li>
<code>J ( -- n )</code>: copies the enclosing loop’s counter to the
stack</li>
<li>
<code>K ( -- n )</code>: copies the enclosing loop’s enclosing
loop’s counter to the stack</li>
<li>
<code>BEGIN ( -- )</code>: starts an indefinite loop</li>
<li>
<code>AGAIN ( -- )</code>: returns to <code>BEGIN</code>
</li>
<li>
<code>WHILE ( flag -- )</code>: if <code>flag</code>, continue; else
jump to after <code>REPEAT</code>
</li>
<li>
<code>REPEAT ( -- )</code>: returns to <code>BEGIN</code> following
<code>WHILE</code>
</li>
<li>
<code>LEAVE ( -- )</code>: leave the current loop immediately</li>
</ul>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Aidan Lakshman.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
